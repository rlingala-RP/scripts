pipeline{
    agent {
             label 'slave'
             }
    stages{
        stage('Initialize') {
        def dockerHome = tool 'MyDocker'
        def mavenHome  = tool 'MyMaven'
        env.PATH = "${dockerHome}/bin:${mavenHome}/bin:${env.PATH}"
    }
        stage('checkout') {
            steps {
                git credentialsId: 'jenkins', url: 'git@github.com:rlingala-RP/Gowebapi.git'
            }
        }
        stage('Sonarqube scan on Gowebapi') {
            steps {
               sh 'go test --cover'
            }
        }
        stage('build docker image') {
           steps{
              sh 'docker build -t localhost:8085:Gowebapi .'
            }
        }
    }
}
